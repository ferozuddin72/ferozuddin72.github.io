var sowb=window.sowb||{};jQuery((function(t){sowb.setupSimpleMasonries=function(){var i=t(".sow-masonry-grid");if(i.data("initialized"))return i;var a=function(){i.each((function(){var a=t(this),e=a.data("layouts"),s=window.matchMedia("(max-width: "+e.tablet.breakPoint+"px)"),o=window.matchMedia("(max-width: "+e.mobile.breakPoint+"px)"),r=e.desktop;o.matches?r=e.mobile:s.matches&&(r=e.tablet);var n=r.numColumns;a.css("width","auto");var h=r.gutter*(n-1),d=(a.width()-h)/n;a.width(d*n+h),a.imagesLoaded((function(){a.find("> .sow-masonry-grid-item").each((function(){var i=t(this),a=i.data("colSpan");a=Math.max(Math.min(a,r.numColumns),1),i.width(d*a+r.gutter*(a-1));var e=i.data("rowSpan");e=Math.max(Math.min(e,r.numColumns),1);var s=r.rowHeight||d;i.css("height",s*e+r.gutter*(e-1));var o=i.find("> img,> a > img"),n=o.attr("height")>0?o.attr("width")/o.attr("height"):1,h=i.height()>0?i.width()/i.height():1;if((n=parseFloat(n.toFixed(3)))>(h=parseFloat(h.toFixed(3)))){o.css("width","auto"),o.css("height","100%"),o.css("margin-top","");var m=-.5*(o.width()-i.width());o.css("margin-left",m+"px")}else{o.css("height","auto"),o.css("width","100%"),o.css("margin-left","");var w=-.5*(o.height()-i.height());o.css("margin-top",w+"px")}})),a.packery({itemSelector:".sow-masonry-grid-item",columnWidth:d,gutter:r.gutter}),i.prev(".sow-masonry-grid-preloader").length&&(i.prev().remove(),i.css("opacity",1))}))}))};t(window).on("resize panelsStretchRows",a),setTimeout((function(){a()}),100),i.data("initialized",!0)},sowb.setupSimpleMasonries(),t(sowb).on("setup_widgets",sowb.setupSimpleMasonries)})),window.sowb=sowb;